<head>
    <title>Scavenger Hunt!</title>
</head>

<body>
</body>

<template name="authShell">
    {{#if currentUser}}
    <div id="navbar">
        {{yield "navbar"}}
    </div>

    <div id="main">
        <div class="content-container">
        {{yield}}
            </div>
    </div>

    <div id="leaderboard">

        <div class="content-container">
            <h1>Leaderboard</h1>
            {{yield "leaderboard"}}
        </div>

    </div>


    {{else}}
    <label for="login"><em>Login:</em></label>

    <form id="login">
        <label for="username">Username: </label><input id="username"/>
        <label for="password">Password:</label><input type="password" id="password"/>
        <input type="submit" id="submitLogin"/>

        <div id="loginError" class="errorMessage"></div>
    </form>

    <label for="register"><em>Register:</em></label>

    <form id="register">
        <label for="username">Username: </label><input id="new_username"/>
        <label for="email">Email: </label><input type="email" id="email"/>
        <label for="password">Password:</label><input type="password" id="new_password"/>
        <input type="submit" id="submitRegister"/>

        <div id="registerError" class="errorMessage"></div>
    </form>
    {{/if}}
</template>

<template name="navbar">
    <h1>Scavenger Hunt</h1>

    <ul>
        <li>Hi, {{currentUser.username}}! Why don't you:</li>
        <li><a href="/scavenges">View existing scavenges</a> |</li>
        <li><a href="/addScavenge">Add a new scavenge</a> |</li>
        <li><a href="/claims">Moderate outstanding claims</a> |</li>
        <li><a href="#" onclick="Meteor.logout()">Logout</a></li>
    </ul>
</template>

<template name="home">
    <h1>Hello {{currentUser.username}}!</h1>
</template>

<template name="loading">
    <h1>Loading...</h1>
</template>

<template name="notFound">
    <h1>Not Found!</h1>
</template>

<template name="addScavenge">
    <form id="addScavenge">

        <p>
            <label for="description">Description of Scavenge:</label>
            <input id="description"/>
        </p>

        <p>
            <label for="points">Points:</label>
            <input id="points"/>
        </p>

        <div id="scavengeError" class="errorMessage"></div>

        <input type="button" class="submitScavenge" value="Submit"></input>
    </form>
</template>

<template name="scavenges">
    <ul>
        {{#if scavenges.length}}
            {{#each scavenge-format scavenges}}
            <li>
                <div class = "scavenge {{status.class}}">
                    <div class="owner">
                        <img src="http://www.gravatar.com/avatar/{{hashedEmail}}"><br/>
                        <span class="text">Owned by <em>{{owner}}</em></span>
                    </div>

                    <div class="information">
                        <span class = "description">{{description}}</span><br />
                        <span class = "points">
                            <div class = "greenbox">{{points}}</div></br />
                            {{status.inputText}}
                        </span>
                    </div>
                </div>
            </li>
            {{/each}}
        {{else}}
            There are currently no scavenges
        {{/if}}
    </ul>
</template>

<template name="leaderboard">
    <ol>
        {{#each sorted results}}

        <li><em>{{user.username}}</em>: {{points}}</li>

        {{/each}}
    </ol>
</template>

<template name="claims">
    <ul>
            {{#each unmoderated scavenges}}
            <div class="scavengeClaim" data ="{{_id}}">
            <h1> {{description}} ({{points}})</h1>
                {{#each outstanding claims}}
                    <div class="claim">
                        {{claimer}} has claimed they have completed this!</br>
                        <input type='button' class='accept' value='They have!' data="{{claimer}}"/>
                        <input type='button' class='reject' value='They are lying!' data="{{claimer}}"/>
                    </div>
                {{/each}}
            {{/each}}
    </ul>
</template>

<template name="scavenge">


</template>